from langchain_core.messages import convert_to_messages


def pretty_print_messages(stream_chunk):
    if isinstance(stream_chunk, tuple):
        ns, stream_chunk = stream_chunk
        # skip parent graph updates in the printouts
        if len(ns) == 0:
            return

        graph_id = ns[-1].split(":")[0]
        print(f"Update from subgraph {graph_id}:")
        print("\n")

    for node_name, node_update in stream_chunk.items():
        print(f"Update from node {node_name}:")
        print("\n")

        for m in convert_to_messages(node_update["messages"]):
            m.pretty_print()
        print("\n")
